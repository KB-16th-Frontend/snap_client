<style scoped></style>
<template>
    <DetailLayout class="pb-5" :onBack="onBack">
        <TotalBlock :year="year" :month="month" :income="income" :spending="spending"></TotalBlock>
        <PaymentsOfDay
            v-for="item in data"
            :key="item.items.id"
            :day="item.day"
            :paymentList="item.items"
            @openModal="handleOpenModal"
        ></PaymentsOfDay>
        <div class="d-grid p-3 pb-5">
            <button type="button" class="btn btn-primary btn-block">ÎçîÎ≥¥Í∏∞</button>
        </div>
        <MoreButton></MoreButton>
        <PaymentDetailModal
            v-if="isOpen"
            :isOpen="isOpen"
            :item="selectedPayment"
            @close="isOpen = false"
        />
    </DetailLayout>
</template>
<script setup>
import TotalBlock from '@/components/payments/detail/TotalBlock.vue'
import PaymentsOfDay from '@/components/payments/detail/PaymentsOfDay.vue'
import DetailLayout from '@/components/layouts/DetailLayout.vue'
import { useRouter } from 'vue-router'

const router = useRouter()
const onBack = () => {
    router.back()
}

// FIXME: DEVÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö© ÌõÑ ÏÇ≠Ï†ú
const year = 2025
const month = 4
const income = 1000000
const spending = 123400
const data = [
    {
        day: 3,
        items: [
            {
                id: '1',
                title: 'Ïö©Îèà',
                amount: 12000000,
                category: 'ÏãùÎπÑ',
                transactionType: 'income',
                emoji: 'üéà',
            },
            {
                id: '2',
                title: 'ÏãúÌôçÏì∞',
                amount: 12000,
                category: 'ÏãùÎπÑ',
                transactionType: 'spending',
                emoji: 'üéà',
            },
            {
                id: '3',
                title: 'ÏãúÌôçÏì∞',
                amount: 12000,
                category: 'ÏãùÎπÑ',
                transactionType: 'spending',
                emoji: 'üéà',
            },
        ],
    },
    {
        day: 2,
        items: [
            {
                id: '4',
                title: 'ÏãúÌôçÏì∞',
                amount: 12000,
                category: 'ÏãùÎπÑ',
                transactionType: 'spending',
                emoji: 'üéà',
            },
            {
                id: '5',
                title: 'ÏãúÌôçÏì∞',
                amount: 12000,
                category: 'ÏãùÎπÑ',
                transactionType: 'spending',
                emoji: 'üéà',
            },
            {
                id: '6',
                title: 'ÏãúÌôçÏì∞',
                amount: 12000,
                category: 'ÏãùÎπÑ',
                transactionType: 'spending',
                emoji: 'üéà',
            },
            {
                id: '7',
                title: 'ÏãúÌôçÏì∞',
                amount: 12000,
                category: 'ÏãùÎπÑ',
                transactionType: 'spending',
                emoji: 'üéà',
            },
        ],
    },
    {
        day: 1,
        items: [
            {
                id: '8',
                title: 'Î¨¥Ïù¥',
                amount: 70000,
                category: 'ÏãùÎπÑ',
                transactionType: 'spending',
                emoji: 'üéà',
            },
            {
                id: '9',
                title: 'GYMBOX(Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõêÏó≠Ï†ê)',
                amount: 150000,
                spendType: 'goodSpending',
                category: 'Í±¥Í∞ï',
                transactionType: 'spending',
                emoji: 'üéà',
            },
        ],
    },
]
// --
import { ref } from 'vue'
import PaymentDetailModal from '@/components/common/Modal/PaymentDetailModal.vue'
const isOpen = ref(false)
const selectedPayment = ref({})

const handleOpenModal = (item) => {
    selectedPayment.value = item
    selectedPayment.value.id = item.id
    console.log(selectedPayment)
    isOpen.value = true
    console.log(isOpen.value)
}
</script>
